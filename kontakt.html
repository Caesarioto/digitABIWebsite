
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kontakt â€“ DigitABI</title>
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
  :root{ --grad-left:#FA565D; --grad-mid:#C45CAD; --grad-right:#9052F8; --ink:#151527; }
  *{box-sizing:border-box} 
  html,body{height:100%}

  body{
    margin:0;
    font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial,sans-serif;
    color:#fff;
    background:linear-gradient(100deg,var(--grad-left) 0%,var(--grad-mid) 50%,var(--grad-right) 100%);
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }

  .container{max-width:1180px;margin:0 auto;padding:32px 24px;flex:1;display:flex;flex-direction:column}

  .nav{display:flex;align-items:center;justify-content:space-between;gap:24px;color:rgba(255,255,255,.88);font-weight:600;letter-spacing:.06em}
  .nav a{color:rgba(255,255,255,.88);text-decoration:none;margin-right:18px}
  .nav .right a{margin-right:0}

  /* --- Footer: immer weiÃŸ --- */
  .footerlinks{
    display:flex;
    gap:28px;
    justify-content:center;
    color:#fff !important;              /* Text im Footer */
    font-weight:600;
    letter-spacing:.06em;
    padding:26px 0 18px;
    flex-wrap:wrap;
  }
  .footerlinks a,
  .footerlinks a:link,
  .footerlinks a:visited,
  .footerlinks a:active{
    color:#fff !important;              /* Links weiÃŸ, auch visited */
    text-decoration:none;
  }
  .footerlinks a:hover{
    text-decoration:underline;
    color:#eae7ff !important;           /* optional leichtes Hover-WeiÃŸ */
  }

  .center{text-align:center}
  h1{margin:0 0 14px;font-size:clamp(28px,3.8vw,40px);font-weight:800; text-align:center; letter-spacing:.06em;}
  .wrap{max-width:75ch;margin:0 auto 26px;line-height:1.8;color:#fff}
  .wrap{max-width:75ch;margin:0 auto 26px;line-height:1.8;color:#fff}
  </style>
</head>
<body>

<!-- Top-Leiste als IFRAME einbinden -->
<header>
    <nav class="topnav" aria-label="Hauptnavigation">
      <a href="index.html" class="logo-link" aria-label="DigitABI Startseite">
        <img src="assets/place-holder.png"
             onerror="this.src='assets/logo-digitabi.png'; this.onerror=null;"
             alt=""
             class="nav-logo">
      </a>

      <div class="nav-links">
        <a href="index.html">Startseite</a>
        <a href="abirechner.html">Abibuch-Creator</a>
        <a href="steckbrief.html">Abibuch-Editor</a>
        <a href="index.html#mottos">Motto-Ideen</a>
        <a href="ueber-uns.html">Ãœber Uns</a>
        <a href="konto.html" data-requires-auth>Mein Konto</a>
      </div>

      <div class="authbox">
        <span id="userEmail" data-requires-auth></span>
        <button id="logoutBtn" class="btn" data-requires-auth>Logout</button>
        <button class="btn" data-requires-anon data-action="open-auth">Login / Registrieren</button>
      </div>
    </nav>

    <!-- Login / Registrieren Modal -->
    <dialog id="authModal">
      <form id="authForm" method="dialog">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
          <strong style="font-size:18px">Einloggen / Registrieren</strong>
          <button type="button" id="closeAuth"
                  style="background:#eee;border:none;border-radius:8px;padding:6px 10px">âœ•</button>
        </div>
        <p style="margin:8px 0 12px;color:#333">
          E-Mail eingeben â€“ wir senden dir einen Magic-Link.
        </p>
        <label>
          E-Mail
          <input name="email" type="email" required placeholder="du@example.com">
        </label>
        <button type="submit"
                style="width:100%;padding:12px 14px;border-radius:12px;border:2px solid #2e1df7;background:#eae7ff;color:#2e1df7;font-weight:800;">
          Magic-Link senden
        </button>
        <div id="authMessage"></div>
      </form>
    </dialog>
  </header>

  <div class="container">
    <main class="center" style="padding:32px 0">
     <h1>ðŸ‘‹Kontakt</h1>
      <div class="wrap">
      </br><strong>E-Mail:</strong> kraftsaft.mp3@gmail.com<br>
        <strong>Telefon:</strong> 01234 / 567890
</br></br>Bei Fragen stehen wir dir gerne jeder Zeit zur VerfÃ¼gung!
      </div>
    </main>

    <footer class="footerlinks">
      <a href="kontakt.html">Kontakt</a>
      <a href="impressum.html">Impressum</a>
      <a href="nutzungsbedingungen.html">Nutzungsbedingungen</a>
      <a href="datenschutz.html">Datenschutz</a>
      <a href="rechtliche-hinweise.html">rechtliche Hinweise</a>
    </footer>
  </div>
    <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const SUPABASE_URL = "https://YOUR-PROJECT.supabase.co";   // <- DEINE URL
    const SUPABASE_ANON_KEY = "YOUR-ANON-KEY";                 // <- DEIN ANON KEY

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    const authModal = document.getElementById("authModal");

    async function loadProfileName(session){
      if(!session?.user) return "";
      const { data } = await supabase
        .from("profiles")
        .select("display_name")
        .eq("id", session.user.id)
        .maybeSingle();
      return data?.display_name || session.user.email;
    }

    async function updateAuthUI(session){
      const isLoggedIn = !!session?.user;
      document.querySelectorAll("[data-requires-auth]")
        .forEach(el => el.style.display = isLoggedIn ? "" : "none");
      document.querySelectorAll("[data-requires-anon]")
        .forEach(el => el.style.display = isLoggedIn ? "none" : "");

      const span = document.getElementById("userEmail");
      if(span) span.textContent = isLoggedIn ? await loadProfileName(session) : "";
    }

    // Initialstatus
    const { data: init } = await supabase.auth.getSession();
    await updateAuthUI(init.session);
    supabase.auth.onAuthStateChange((_e, session) => updateAuthUI(session));

    // Login
    async function signInWithEmail(e){
      e.preventDefault();
      const msg = document.getElementById("authMessage");
      const email = e.currentTarget.querySelector('input[name="email"]').value.trim();
      if(!email){ msg.textContent = "Bitte E-Mail eingeben."; return; }

      const { error } = await supabase.auth.signInWithOtp({
        email,
        options: { emailRedirectTo: window.location.origin }
      });
      msg.textContent = error ? ("Fehler: " + error.message)
                              : "Magic-Link gesendet. Bitte Postfach prÃ¼fen âœ‰ï¸";
    }

    document.getElementById("authForm")?.addEventListener("submit", signInWithEmail);
    document.getElementById("logoutBtn")?.addEventListener("click", () => supabase.auth.signOut());
    document.querySelectorAll("[data-action='open-auth']").forEach(btn =>
      btn.addEventListener("click", () => authModal.showModal())
    );
    document.getElementById("closeAuth")?.addEventListener("click", () => authModal.close());
  </script>
</body>
</html>

</body>
</html>
