
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DigitABI ‚Äì mein digitales Abibuch</title>
  <!-- Basis-URL f√ºr alle relativen Links -->
  <base href="./">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
    
    :root {
      --grad-left: #FA565D;
      --grad-mid: #C45CAD;
      --grad-right: #9052F8;
      --ink: #1f1f2f;
      --muted: rgba(255, 255, 255, .85);
    }

    /* ==================== FIX: FL√úSSIGER GRADIENT ==================== */
    html {
      min-height: 100%;
      height: 100%;
      background: linear-gradient(100deg, var(--grad-left) 0%, var(--grad-mid) 50%, var(--grad-right) 100%) fixed no-repeat;
      background-size: cover;
      background-position: center;
    }

    body {
      margin: 0;
      font-family: 'Poppins', system-ui, Segoe UI, Roboto, Arial, sans-serif;
      color: #fff;
      background: transparent;               /* WICHTIG: body ist jetzt transparent */
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    /* ==================== ENDE FIX ==================== */

    * { box-sizing: border-box }

    .container {
      max-width: 1180px;
      margin: 0 auto;
      padding: 32px 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
      color: var(--muted);
      font-weight: 600;
      letter-spacing: .06em;
    }
    .nav a {
      color: var(--muted);
      text-decoration: none;
      margin-right: 18px;
    }
    .nav .right a { margin-right: 0 }

    /* Footer */
    .footerlinks {
      display: flex;
      gap: 28px;
      justify-content: center;
      color: #fff !important;
      font-weight: 600;
      letter-spacing: .06em;
      padding: 26px 0 18px;
      flex-wrap: wrap;
    }
    .footerlinks a,
    .footerlinks a:link,
    .footerlinks a:visited,
    .footerlinks a:active {
      color: #fff !important;
      text-decoration: none;
    }
    .footerlinks a:hover {
      text-decoration: underline;
      color: #eae7ff !important;
    }

    .center { text-align: center }
    .smallcaps { letter-spacing: .18em }
    .hr {
      width: 36px;
      height: 4px;
      background: #fff;
      border-radius: 999px;
      margin: 6px auto 18px;
      opacity: .9;
    }

    /* hero */
    .hero {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 32px;
      align-items: center;
      padding: 56px 0 24px;
    }
    .hero h1 {
      font-size: clamp(44px, 6vw, 72px);
      margin: 0 0 4px;
      font-weight: 800;
      letter-spacing: .02em;
    }
    .hero h2 {
      font-weight: 300;
      letter-spacing: .12em;
      font-size: clamp(18px, 2.5vw, 28px);
      margin: 0 0 24px;
    }
    .hero .sub {
      color: var(--muted);
      line-height: 1.7;
      max-width: 46ch;
    }
    .hero .cta {
      display: inline-block;
      padding: 14px 22px;
      background: #E6E8FF;
      color: #2d2d7a;
      border: 2px solid #2d2d7a;
      border-radius: 999px;
      font-weight: 700;
      letter-spacing: .06em;
      box-shadow: 0 6px 0 rgba(45, 45, 122, .25);
      text-decoration: none;
    }
    .hero .cta:hover {
      transform: translateY(-1px);
    }
    .illus {
      width: 100%;
      aspect-ratio: 4/3;
      background: transparent url('assets/hero-placeholder.png') center/contain no-repeat;
      border-radius: 12px;
    }

    /* responsive */
    @media (max-width: 900px) {
      .hero { grid-template-columns: 1fr }
    }
    .hero .copy { text-align: center; margin: 0 auto; }
    .hero .sub { margin: 0 auto; }
    .hero .cta { margin: 0 auto; }

    .bullets.features { display: flex; justify-content: center; }
    .bullets.features > div { text-align: center; max-width: 58ch; }
  </style>
</head>
<body>

  <header>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
      :root { --link: rgba(255,255,255,.9); }
      .topnav {
        position: relative;
        display: flex;
        align-items: center;
        height: 48px;
        padding: 0 12px;
        font-family: 'Poppins', system-ui, Segoe UI, Roboto, Arial, sans-serif;
        font-weight: 700;
        letter-spacing: .04em;
        color: #fff;
      }
      .topnav .logo-link {
        display: flex;
        align-items: center;
        height: 100%;
        margin-right: 20px;
        text-decoration: none;
      }
      .topnav .nav-logo {
        height: 36px;
        width: auto;
        object-fit: contain;
      }
      .topnav .nav-links {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 28px;
        flex: 1;
      }
      .topnav .nav-links a {
        color: var(--link);
        text-decoration: none;
        white-space: nowrap;
      }
      .topnav .nav-links a:hover { text-decoration: underline; }

      .topnav .authbox {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .topnav .btn {
        padding: 7px 10px;
        border-radius: 10px;
        border: 2px solid rgba(255,255,255,.9);
        background: transparent;
        color: #fff;
        font-weight: 800;
        cursor: pointer;
        font-size: 13px;
      }
      .topnav .btn:hover { background: rgba(255,255,255,.15); }
      #userEmail { color:#fff; font-weight:700; font-size:14px; }

      [data-requires-auth] { display:none; }
      [data-requires-anon] { display:inline-flex; }

      /* LOGIN-DIALOG */
      dialog {
        border: none;
        border-radius: 16px;
        padding: 0;
        width: min(420px, 92vw);
        background: #fff;
        color: #111;
        box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      }
      dialog::backdrop {
        background: rgba(0,0,0,0.45);
        backdrop-filter: blur(3px);
      }
      dialog form {
        padding: 26px 22px;
        font-family: inherit;
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      dialog label {
        display: grid;
        gap: 6px;
        margin-bottom: 12px;
        font-weight: 600;
        color: #222;
      }
      dialog input {
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font: inherit;
      }
      dialog button[type="submit"] {
        padding: 10px 14px;
        border-radius: 10px;
        border: 2px solid #2e1df7;
        background: #eae7ff;
        color: #2e1df7;
        font-weight: 700;
        cursor: pointer;
      }
      #authMessage { margin-top:10px; color:#333; font-weight:600; }
    </style>

    <nav class="topnav" aria-label="Hauptnavigation">
      <a href="index.html" class="logo-link" aria-label="DigitABI Startseite">
        <img src="assets/place-holder.png"
             onerror="this.src='assets/logo-digitabi.png'; this.onerror=null;"
             alt=""
             class="nav-logo">
      </a>

      <div class="nav-links">
        <a href="index.html">Startseite</a>
        <a href="abirechner.html">Abibuch-Creator</a>
        <a href="steckbrief.html">Abibuch-Editor</a>
        <a href="index.html#mottos">Motto-Ideen</a>
        <a href="ueber-uns.html">√úber Uns</a>
        <a href="konto.html" data-requires-auth>Mein Konto</a>
      </div>

      <div class="authbox">
        <span id="userEmail" data-requires-auth></span>
        <button id="logoutBtn" class="btn" data-requires-auth>Logout</button>
        <button class="btn" data-requires-anon data-action="open-auth">Login / Registrieren</button>
      </div>
    </nav>

    <!-- Login / Registrieren -->
  <dialog id="authModal">
  <form id="authForm" method="dialog">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
      <strong style="font-size:18px">Einloggen / Registrieren</strong>
      <button type="button" id="closeAuth"
              style="background:#eee;border:none;border-radius:8px;padding:6px 10px">‚úï</button>
    </div>
    <p style="margin:8px 0 12px;color:#333">
      E-Mail und Username eingeben ‚Äì wir senden dir einen Magic-Link.
    </p>

    <!-- E-Mail -->
    <label>
      E-Mail
      <input name="email" type="email" required placeholder="du@example.com">
    </label>

    <!-- üëá NEU: Username-Feld -->
    <label>
      Username
      <input name="display_name" type="text" required placeholder="z.B. Mulan">
    </label>

    <button type="submit"
            style="width:100%;padding:12px 14px;border-radius:12px;border:2px solid #2e1df7;background:#eae7ff;color:#2e1df7;font-weight:800;">
      Magic-Link senden
    </button>
    <div id="authMessage"></div>
  </form>
</dialog>

    <script type="module">
      import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

      const SUPABASE_URL = "https://xiiqcjutmvhdmmnzvciu.supabase.co";
      const SUPABASE_ANON_KEY = "sb_publishable_B1BShZ1r77ulTAcT8ayMdw_rON5I-O9";

      const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      const authModal = document.getElementById("authModal");

const url = new URL(window.location.href);
  const type = url.searchParams.get("type");
  const code = url.searchParams.get("code");

  if (type && code) {
    try {
      // Supabase tauscht Code gegen Session (user wird eingeloggt)
      const { error } = await supabase.auth.exchangeCodeForSession(window.location.href);

      if (error) {
        console.error("Auth-Callback Fehler", error);
        alert("Login mit Magic-Link ist fehlgeschlagen.");
      } else {
        // URL aufr√§umen (Parameter entfernen)
        window.history.replaceState({}, document.title, window.location.pathname);

        // OPTIONAL: danach direkt auf Konto-Seite schicken
        window.location.href = "konto.html";
      }
    } catch (err) {
      console.error("Unerwarteter Fehler beim Auth-Callback", err);
    }
  }
      
      async function loadProfileName(session){
        if(!session?.user) return "";
        const { data } = await supabase
          .from("profiles")
          .select("display_name")
          .eq("id", session.user.id)
          .maybeSingle();
        return data?.display_name || session.user.email;
      }

      async function updateAuthUI(session){
        const isLoggedIn = !!session?.user;
        document.querySelectorAll("[data-requires-auth]")
          .forEach(el => el.style.display = isLoggedIn ? "" : "none");
        document.querySelectorAll("[data-requires-anon]")
          .forEach(el => el.style.display = isLoggedIn ? "none" : "");

        const span = document.getElementById("userEmail");
        if(span) span.textContent = isLoggedIn ? await loadProfileName(session) : "";
      }

      // Initialer Status
      const { data: init } = await supabase.auth.getSession();
      await updateAuthUI(init.session);
      supabase.auth.onAuthStateChange((_e, session) => updateAuthUI(session));

      // Login
      async function signInWithEmail(e){
        e.preventDefault();
        const msg = document.getElementById("authMessage");
        const email = e.currentTarget.querySelector('input[name="email"]').value.trim();
        if(!email){ msg.textContent = "Bitte E-Mail eingeben."; return; }

        const { error } = await supabase.auth.signInWithOtp({
          email,
          options: { emailRedirectTo: window.location.origin }
        });
        msg.textContent = error ? ("Fehler: " + error.message)
                                : "Magic-Link gesendet. Bitte Postfach pr√ºfen ‚úâÔ∏è";
      }

      document.getElementById("authForm")?.addEventListener("submit", signInWithEmail);
      document.getElementById("logoutBtn")?.addEventListener("click", () => supabase.auth.signOut());
      document.querySelectorAll("[data-action='open-auth']").forEach(btn =>
        btn.addEventListener("click", () => authModal.showModal())
      );
      document.getElementById("closeAuth")?.addEventListener("click", () => authModal.close());
    </script>
  </header>

 


  <div class="container">
    <!-- Hero -->
    <section class="hero">
      <div class="illus" aria-hidden="true"></div>
      <div class="copy">
        <h1>DigitABI</h1>
        <div class="hr"></div>
        <h2>mein digitales Abibuch</h2>
        <p class="sub">Erstellt euer Abibuch einfach online ‚Äì gemeinsam, sicher und mit Stil</p>
        <p style="height:16px"></p>
        <a class="cta" href="abirechner.html">Los geht‚Äôs zu deinem Abibuch! üöÄ</a>
      </div>
    </section>

    <section class="center">
      <p class="smallcaps" style="color:var(--muted)">Eure Erinnerungen, digital und gedruckt ‚Äì mit unserer Plattform f√ºr moderne Abib√ºcher</p>
    </section>
  
    <!-- Deine Split-Bl√∂cke (unver√§ndert) -->
    <section class="features-split full-edge-split" style="margin: 48px 0; display: flex; flex-wrap: wrap; align-items: center; gap: 32px;">
      <div style="flex: 1.2; min-width: 280px; text-align: center; align-self: center;">
        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(6px); border-radius: 16px; padding: 20px 24px; color: #fff;">
          <h2 style="margin: 0; font-size: clamp(20px, 3.5vw, 28px); font-weight: 800; color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.3);">
            Was wir bieten:
          </h2>
          <h3 style="margin: 8px 0 0; font-size: clamp(18px, 3vw, 24px); font-weight: 700; color: #fff;">
            Dein All-in-One f√ºr das perfekte Abibuch
          </h3>
        </div>
      </div>
      <div style="flex: 2.5; min-width: 320px;">
        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(6px); border-radius: 16px; padding: 24px 32px; color: #fff;">
          <div class="smallcaps" style="display: grid; gap: 24px; font-size: clamp(15px, 2.2vw, 18px);">
            <div>üñ®Ô∏è <strong>Buch-Version:</strong> Professionell und schnell gedrucktes Buch, das du in der Hand halten kannst ‚Äì frei gestaltbar und auf deinen Bedarf zugeschnitten.</div>
            <div>üì± <strong>Digitale Version:</strong> Als Einzige bieten wir eine interaktive Digitale-Version mit Multimedia-Elementen.</div>
            <div>ü§ù <strong>Gemeinsames Erstellen:</strong> Alle f√ºllen online ihre Steckbriefe aus, nehmen an Rankings teil oder laden Fotos und Videos hoch ‚Äì einfache Zusammenarbeit ohne Chaos.</div>
            <div>üé® <strong>Freie Gestaltung:</strong> Intuitives Tool, das sich an eure W√ºnsche anpasst ‚Äì von Layout bis Inhalt habt ihr die richtige Mischung aus Unterst√ºtzung und Freiheit.</div>
          </div>
        </div>
      </div>
    </section>

    <section class="benefits-split" style="margin: 48px 0; display: flex; flex-wrap: wrap; gap: 32px; align-items: center; justify-content: center; max-width: 1180px; margin-left: auto; margin-right: auto;">
      <div style="flex: 2.5; min-width: 320px;">
        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(6px); border-radius: 16px; padding: 24px 28px; color: #fff;">
          <div class="smallcaps" style="display: grid; gap: 16px; font-size: clamp(15px, 2.2vw, 18px);">
            <div>üîó <strong>F√ºr immer verbunden:</strong> Bleibt mit Mitsch√ºlern in Kontakt ‚Äì automatische Erinnerungen an Jubil√§en und Klassentreffen.</div>
        <div>üìà <strong>Lebens-Updates:</strong> Teilt √ºber die Jahre Neuigkeiten wie Studium, Job oder Familie ‚Äì euer Abibuch w√§chst mit euch.</div>
        <div>üñºÔ∏è <strong>Mehr Inhalte:</strong> Unbegrenzt Bilder hochladen, ohne Platzprobleme.</div>
        <div>üé• <strong>Videos integrieren:</strong> F√ºgt Highlights wie Abiball, Reden oder lustige Momente ein ‚Äì lebendiger als je zuvor.</div>
        <div>üó£Ô∏è <strong>Sprachnachrichten:</strong> Pers√∂nliche Botschaften oder Sprachnotizen an Freunde ‚Äì emotional und authentisch.</div>
        <div>üîí <strong>Immer verf√ºgbar:</strong> Kein Verlust mehr ‚Äì sicherer Zugriff jederzeit, √ºberall, DSGVO-konform und auf Servern in Deutschland.</div>
          </div>
        </div>
      </div>
      <div style="flex: 1.2; min-width: 280px; text-align: center; align-self: center;">
        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(6px); border-radius: 16px; padding: 20px 24px; color: #fff;">
          <h2 style="margin: 0; font-size: clamp(20px, 3.5vw, 28px); font-weight: 800; color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.3);">
            Warum digital?
          </h2>
          <h3 style="margin: 8px 0 0; font-size: clamp(18px, 3vw, 24px); font-weight: 700; color: #fff;">
            Mehr als nur ein Buch ‚Äì eine lebendige Community
          </h3>
        </div>
      </div>
    </section>

    <footer class="footerlinks smallcaps">
      <a href="./kontakt.html">Kontakt</a>
      <a href="./impressum.html">Impressum</a>
      <a href="./nutzungsbedingungen.html">Nutzungsbedingungen</a>
      <a href="./datenschutz.html">Datenschutz</a>
      <a href="./rechtliche-hinweise.html">rechtliche Hinweise</a>
    </footer>
  </div>
</body>
</html>
